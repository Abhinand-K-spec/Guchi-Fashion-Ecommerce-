<%- include('../partials/user/header') %>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guchi - Payment Success</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="/styles/style.css" />
  <link rel="icon" href="/images/favicon.png" type="image/png" />
  <style>
    .order-details-card {
      max-width: 600px;
      margin: 2rem auto;
      padding: 1.5rem;
      border: 1px solid #ddd;
      border-radius: 8px;
      background-color: #f9f9f9;
    }
    .order-details-card h5 {
      margin-bottom: 1rem;
    }
    .order-details-card p {
      margin-bottom: 0.5rem;
    }
    a{text-decoration: none;}
  </style>
</head>

<body>
  <div class="container mt-5 text-center">
    <h1>Order Successful!</h1>
    <i class="fas fa-check-circle text-success" style="font-size: 80px;"></i>
    <p class="message mt-3"><%= successMessage %></p>

    <div class="order-details-card">
      <h5>Order Details</h5>
      <p><strong>Order ID:</strong> <%= order.OrderId %></p>
      <p><strong>Order Date:</strong> <%= new Date(order.OrderDate).toLocaleDateString() %></p>
      <p><strong>Payment Method:</strong> <%= order.PaymentMethod %></p>
      <p><strong>Payment Status:</strong> <%= order.PaymentStatus %></p>
      <p><strong>Order Status:</strong> <%= order.Status %></p>
      <h5>Shipping Address</h5>
      <p>
        <%= user.userName %><br>
        <%= address.town %>, <%= address.city %>, <%= address.state %> - <%= address.postCode %><br>
        Phone: <%= address.phone %>
        <% if (address.alternativePhone) { %>
          <br>Alt: <%= address.alternativePhone %>
        <% } %>
      </p>
      <h5>Items</h5>
      <% order.Items.forEach(item => { %>
        <p>
          <%= item.product.name %> (Qty: <%= item.quantity %>) - â‚¹<%= (item.originalPrice - item.itemDiscount).toFixed(2) %>
        </p>
      <% }) %>
      <a href="/orders" class="btn btn-primary mt-3">View All Orders</a>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
<%- include('../partials/user/footer') %>